<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Violin Mastery Quest â€“ Professional Edition</title>
  <meta name="description" content="Interactive violin music theory quiz for accelerated learning, memory retention, and mastery of violin technique, music theory, and performance skills.">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      line-height: 1.6;
    }

    #app {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 800px;
      width: 100%;
      padding: 40px;
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      color: #764ba2;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
      font-weight: 700;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 1.1rem;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .stat-item {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 25px;
      border-radius: 12px;
      text-align: center;
      flex: 1;
      min-width: 120px;
      box-shadow: 0 4px 15px rgba(118, 75, 162, 0.3);
      transition: transform 0.3s ease;
    }

    .stat-item:hover {
      transform: translateY(-5px);
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 5px;
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .progress-bar {
      background: #e0e0e0;
      height: 30px;
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 30px;
      position: relative;
    }

    .progress-fill {
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      height: 100%;
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .question-container {
      margin-bottom: 30px;
    }

    .question-header {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .category-badge {
      display: inline-block;
      background: #764ba2;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.85rem;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .question-text {
      font-size: 1.3rem;
      color: #333;
      font-weight: 600;
      margin-top: 10px;
    }

    .answers {
      display: grid;
      gap: 15px;
      margin-bottom: 25px;
    }

    .answer-btn {
      background: white;
      border: 3px solid #e0e0e0;
      padding: 20px;
      border-radius: 12px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-weight: 500;
      color: #333;
    }

    .answer-btn:hover:not(:disabled) {
      border-color: #764ba2;
      background: #f8f3ff;
      transform: translateX(10px);
    }

    .answer-btn:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .answer-btn.correct {
      background: #d4edda;
      border-color: #28a745;
      animation: correctPulse 0.5s ease;
    }

    .answer-btn.incorrect {
      background: #f8d7da;
      border-color: #dc3545;
      animation: incorrectShake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .feedback {
      background: #e7f3ff;
      border-left: 4px solid #007bff;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      animation: slideIn 0.5s ease;
    }

    .feedback.correct {
      background: #d4edda;
      border-left-color: #28a745;
    }

    .feedback.incorrect {
      background: #f8d7da;
      border-left-color: #dc3545;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .feedback-title {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #333;
    }

    .feedback-text {
      color: #555;
      line-height: 1.8;
    }

    .next-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
    }

    .next-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(118, 75, 162, 0.6);
    }

    .start-screen, .results-screen {
      text-align: center;
    }

    .start-btn, .restart-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 20px 50px;
      border-radius: 15px;
      font-size: 1.3rem;
      font-weight: 700;
      cursor: pointer;
      margin-top: 30px;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(118, 75, 162, 0.4);
    }

    .start-btn:hover, .restart-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(118, 75, 162, 0.6);
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .result-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(118, 75, 162, 0.3);
    }

    .result-label {
      font-size: 1rem;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .result-value {
      font-size: 2.5rem;
      font-weight: 700;
    }

    .performance-message {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 12px;
      margin: 20px 0;
      font-size: 1.2rem;
      color: #333;
      line-height: 1.8;
    }

    .category-breakdown {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 12px;
      margin-top: 25px;
      text-align: left;
    }

    .category-breakdown h3 {
      color: #764ba2;
      margin-bottom: 20px;
      font-size: 1.5rem;
    }

    .category-item {
      padding: 12px 0;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .category-item:last-child {
      border-bottom: none;
    }

    .category-name {
      font-weight: 600;
      color: #333;
    }

    .category-score {
      font-weight: 700;
      color: #764ba2;
      font-size: 1.1rem;
    }

    .intro-text {
      text-align: left;
      color: #555;
      line-height: 1.8;
      margin-bottom: 20px;
      font-size: 1.05rem;
    }

    .features-list {
      text-align: left;
      margin: 25px 0;
    }

    .features-list li {
      padding: 10px 0;
      color: #555;
      font-size: 1.05rem;
    }

    .features-list li:before {
      content: "ðŸŽ» ";
      margin-right: 10px;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 768px) {
      #app {
        padding: 25px;
      }

      h1 {
        font-size: 2rem;
      }

      .question-text {
        font-size: 1.1rem;
      }

      .answer-btn {
        padding: 15px;
        font-size: 1rem;
      }

      .stat-item {
        min-width: 100px;
        padding: 12px 20px;
      }

      .stat-value {
        font-size: 1.5rem;
      }
    }

    /* Loading animation */
    .loading {
      text-align: center;
      padding: 40px;
      color: #764ba2;
      font-size: 1.2rem;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #764ba2;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="app">
    <h1>ðŸŽ» Violin Mastery Quest</h1>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen">
      <p class="subtitle">Master violin technique, music theory, and performance skills through engaging, research-backed spaced repetition learning.</p>

      <div class="intro-text">
        <p>Welcome to your personalized violin learning journey! This quiz uses proven educational techniques to help you:</p>
      </div>

      <ul class="features-list">
        <li><strong>Build muscle memory</strong> through immediate feedback and repetition</li>
        <li><strong>Retain knowledge long-term</strong> with spaced learning principles</li>
        <li><strong>Develop quick recall</strong> of essential music theory and technique</li>
        <li><strong>Integrate concepts</strong> seamlessly into your practice and performance</li>
      </ul>

      <div class="intro-text">
        <p>Each question includes detailed explanations to deepen your understanding. Ready to begin your mastery journey?</p>
      </div>

      <button id="startBtn" class="start-btn">Start Quiz</button>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="hidden">
      <div class="stats">
        <div class="stat-item">
          <div class="stat-label">Score</div>
          <div class="stat-value" id="scoreDisplay">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Question</div>
          <div class="stat-value" id="questionCounter">1/20</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Accuracy</div>
          <div class="stat-value" id="accuracyDisplay">0%</div>
        </div>
      </div>

      <div class="progress-bar">
        <div id="progressFill" class="progress-fill" style="width: 0%;">
          <span id="progressText">0%</span>
        </div>
      </div>

      <div class="question-container">
        <div class="question-header">
          <span id="categoryBadge" class="category-badge">Category</span>
          <div id="questionText" class="question-text"></div>
        </div>

        <div id="answersContainer" class="answers"></div>

        <div id="feedbackContainer" class="hidden"></div>

        <button id="nextBtn" class="next-btn hidden">Next Question</button>
      </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="hidden">
      <h2 style="text-align:center; color:#764ba2; margin-bottom:20px;">ðŸŽ‰ Quiz Complete!</h2>

      <div class="results-grid">
        <div class="result-card">
          <div class="result-label">Final Score</div>
          <div class="result-value" id="finalScore">0</div>
        </div>
        <div class="result-card">
          <div class="result-label">Accuracy</div>
          <div class="result-value" id="finalAccuracy">0%</div>
        </div>
        <div class="result-card">
          <div class="result-label">Total Questions</div>
          <div class="result-value" id="totalQuestions">0</div>
        </div>
      </div>

      <div class="performance-message" id="performanceMessage"></div>

      <div class="category-breakdown" id="categoryBreakdown"></div>

      <button id="restartBtn" class="restart-btn">Take Quiz Again</button>
    </div>
  </div>

  <script>
    (function() {
      'use strict';

      // Quiz questions database - comprehensive violin knowledge
      const questions = [
        {
          category: "Violin Technique",
          question: "What is the proper bow hold position for the thumb?",
          answers: [
            "Straight and rigid on the stick",
            "Slightly bent touching the frog and stick",
            "Extended away from the bow",
            "Flat against the frog"
          ],
          correct: 1,
          explanation: "The thumb should be slightly bent, making contact with both the frog and stick. This allows for flexibility, control, and reduces tension while maintaining a secure grip."
        },
        {
          category: "Music Theory",
          question: "In the key of D major, what is the seventh scale degree?",
          answers: ["C", "C#", "D", "B"],
          correct: 1,
          explanation: "The seventh scale degree in D major is C#. D major has two sharps (F# and C#), making C# the leading tone that resolves to the tonic D."
        },
        {
          category: "Violin Technique",
          question: "What does 'sul ponticello' mean?",
          answers: [
            "Play near the bridge",
            "Play near the fingerboard",
            "Play with the wood of the bow",
            "Play pizzicato"
          ],
          correct: 0,
          explanation: "'Sul ponticello' means to bow near the bridge, creating a glassy, metallic tone color. This technique is used for special effects and is common in contemporary music."
        },
        {
          category: "Music Theory",
          question: "What interval is formed between the notes E and G#?",
          answers: ["Minor third", "Major third", "Perfect fourth", "Augmented second"],
          correct: 1,
          explanation: "E to G# is a major third (4 half steps). Major thirds have a bright, consonant sound and are fundamental to major chords and scales."
        },
        {
          category: "Violin Anatomy",
          question: "What is the purpose of the soundpost inside the violin?",
          answers: [
            "To hold the strings in place",
            "To transmit vibrations and support the top plate",
            "To adjust the pitch of the strings",
            "To create aesthetic appeal"
          ],
          correct: 1,
          explanation: "The soundpost is a critical wooden dowel that transmits vibrations from the top plate to the back plate and provides crucial structural support. Its position greatly affects tone quality and is often called the 'soul' of the violin."
        },
        {
          category: "Violin Technique",
          question: "What is the recommended finger curvature for left hand position?",
          answers: [
            "Completely straight",
            "Naturally curved",
            "Hyperextended backwards",
            "Flat against the fingerboard"
          ],
          correct: 1,
          explanation: "Fingers should be naturally curved, maintaining a relaxed shape that allows for agility, accurate intonation, and prevents injury. This position provides optimal strength and flexibility."
        },
        {
          category: "Music Reading",
          question: "What does the marking 'pizz.' indicate?",
          answers: [
            "Play louder",
            "Play softer",
            "Pluck the strings with fingers",
            "Use more bow"
          ],
          correct: 2,
          explanation: "'Pizz.' (pizzicato) instructs the player to pluck the strings with the fingers instead of using the bow. The marking 'arco' indicates a return to bowing."
        },
        {
          category: "Scales and Arpeggios",
          question: "How many sharps are in the key of A major?",
          answers: ["One", "Two", "Three", "Four"],
          correct: 2,
          explanation: "A major has three sharps: F#, C#, and G#. This follows the order of sharps (F# C# G# D# A# E# B#) and makes A major a common and comfortable key for violinists."
        },
        {
          category: "Violin Technique",
          question: "What is a 'dÃ©tachÃ©' bowing technique?",
          answers: [
            "Bouncing the bow on the string",
            "Separate bow strokes for each note",
            "Smooth, connected bowing",
            "Playing at the frog only"
          ],
          correct: 1,
          explanation: "DÃ©tachÃ© is a fundamental bowing technique using separate, smooth bow strokes for each note without accents or gaps. It's essential for developing bow control and evenness."
        },
        {
          category: "Music Theory",
          question: "What is the relative minor of G major?",
          answers: ["E minor", "A minor", "D minor", "B minor"],
          correct: 0,
          explanation: "E minor is the relative minor of G major. They share the same key signature (F#) and the relative minor is always built on the sixth scale degree of the major scale."
        },
        {
          category: "Intonation",
          question: "Which finger placement requires the smallest distance between fingers?",
          answers: [
            "Between 1st and 2nd fingers",
            "Between 2nd and 3rd fingers",
            "Between 3rd and 4th fingers",
            "All distances are equal"
          ],
          correct: 2,
          explanation: "The distance between 3rd and 4th fingers is smallest for half steps in standard position. Understanding finger spacing patterns (whole steps vs. half steps) is crucial for accurate intonation."
        },
        {
          category: "Vibrato",
          question: "What is the primary motion in arm vibrato?",
          answers: [
            "Finger joints only",
            "Wrist rotation",
            "Forearm rotation from the elbow",
            "Shoulder movement"
          ],
          correct: 2,
          explanation: "Arm vibrato involves forearm rotation initiated from the elbow, creating a wider, warmer oscillation than wrist or finger vibrato. It's often used for expressive, romantic passages."
        },
        {
          category: "Bow Technique",
          question: "What is 'spiccato' bowing?",
          answers: [
            "Long, sustained bow strokes",
            "Controlled bouncing bow",
            "Playing at the frog",
            "Playing with the wood of the bow"
          ],
          correct: 1,
          explanation: "Spiccato is a controlled, off-the-string bouncing bow stroke where the bow bounces naturally between notes. It's typically played in the middle of the bow and creates a light, articulated sound."
        },
        {
          category: "Position Playing",
          question: "In third position on the E string, where does the first finger play?",
          answers: ["F#", "G", "G#", "A"],
          correct: 3,
          explanation: "In third position on the E string, the first finger plays A. Each position moves up the fingerboard by a whole step (or two half steps), and understanding position relationships is key to shifting."
        },
        {
          category: "Music Reading",
          question: "What does a fermata symbol (ð„) indicate?",
          answers: [
            "Play louder",
            "Hold the note longer than its written value",
            "Play softly",
            "Repeat the section"
          ],
          correct: 1,
          explanation: "A fermata indicates that a note or rest should be held longer than its written duration, typically about 1.5 to 2 times longer, though the exact duration is at the performer's discretion."
        },
        {
          category: "Double Stops",
          question: "What are double stops?",
          answers: [
            "Playing two notes simultaneously on adjacent strings",
            "Stopping the bow twice per note",
            "Playing the same note twice",
            "Using two bows at once"
          ],
          correct: 0,
          explanation: "Double stops involve playing two notes simultaneously on adjacent strings, requiring precise finger placement and bow distribution. They're essential for chords, harmony, and advanced repertoire."
        },
        {
          category: "Violin Maintenance",
          question: "How often should you loosen the bow hair when not playing?",
          answers: [
            "Never",
            "Once a month",
            "After every playing session",
            "Only when changing strings"
          ],
          correct: 2,
          explanation: "Bow hair should be loosened after every playing session to prevent the stick from warping and maintain proper camber. This extends the life of your bow and maintains optimal performance."
        },
        {
          category: "Rhythm",
          question: "In 6/8 time, how many eighth notes are in each measure?",
          answers: ["Four", "Six", "Eight", "Three"],
          correct: 1,
          explanation: "6/8 time contains six eighth notes per measure, typically felt in two groups of three (compound duple meter). This creates a lilting, dance-like feel common in gigues and tarantellas."
        },
        {
          category: "Dynamics",
          question: "What does 'crescendo' mean?",
          answers: [
            "Play suddenly loud",
            "Play gradually louder",
            "Play gradually softer",
            "Play very soft"
          ],
          correct: 1,
          explanation: "Crescendo indicates a gradual increase in volume. On violin, this is achieved through increased bow speed, pressure, or moving closer to the bridge while maintaining tone quality."
        },
        {
          category: "Performance Practice",
          question: "What is the purpose of practicing scales daily?",
          answers: [
            "To improve intonation and finger patterns",
            "To tire out your fingers",
            "To show off technical skill",
            "To avoid playing repertoire"
          ],
          correct: 0,
          explanation: "Daily scale practice develops muscle memory for finger patterns, improves intonation, builds technical facility, and familiarizes you with all keys. Scales are the foundation of virtually all violin music."
        }
      ];

      // Quiz state management
      let currentQuestion = 0;
      let score = 0;
      let answered = 0;
      let answeredCorrect = 0;
      let categoryStats = {};
      let hasAnswered = false;

      // DOM elements
      const startScreen = document.getElementById('startScreen');
      const quizScreen = document.getElementById('quizScreen');
      const resultsScreen = document.getElementById('resultsScreen');
      const startBtn = document.getElementById('startBtn');
      const nextBtn = document.getElementById('nextBtn');
      const restartBtn = document.getElementById('restartBtn');
      const scoreDisplay = document.getElementById('scoreDisplay');
      const questionCounter = document.getElementById('questionCounter');
      const accuracyDisplay = document.getElementById('accuracyDisplay');
      const progressFill = document.getElementById('progressFill');
      const progressText = document.getElementById('progressText');
      const categoryBadge = document.getElementById('categoryBadge');
      const questionText = document.getElementById('questionText');
      const answersContainer = document.getElementById('answersContainer');
      const feedbackContainer = document.getElementById('feedbackContainer');

      // Initialize quiz
      function init() {
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', resetQuiz);

        // Shuffle questions for variety
        shuffleArray(questions);
      }

      // Start the quiz
      function startQuiz() {
        startScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        loadQuestion();
      }

      // Load current question
      function loadQuestion() {
        if (currentQuestion >= questions.length) {
          showResults();
          return;
        }

        hasAnswered = false;
        const question = questions[currentQuestion];

        // Update UI
        categoryBadge.textContent = question.category;
        questionText.textContent = question.question;
        questionCounter.textContent = `${currentQuestion + 1}/${questions.length}`;

        // Update progress bar
        const progress = ((currentQuestion) / questions.length) * 100;
        progressFill.style.width = progress + '%';
        progressText.textContent = Math.round(progress) + '%';

        // Clear previous answers and feedback
        answersContainer.innerHTML = '';
        feedbackContainer.innerHTML = '';
        feedbackContainer.classList.add('hidden');
        nextBtn.classList.add('hidden');

        // Create answer buttons
        question.answers.forEach((answer, index) => {
          const btn = document.createElement('button');
          btn.className = 'answer-btn';
          btn.textContent = answer;
          btn.addEventListener('click', () => selectAnswer(index));
          answersContainer.appendChild(btn);
        });
      }

      // Handle answer selection
      function selectAnswer(selectedIndex) {
        if (hasAnswered) return;

        hasAnswered = true;
        answered++;
        const question = questions[currentQuestion];
        const isCorrect = selectedIndex === question.correct;

        // Update statistics
        if (isCorrect) {
          score += 10;
          answeredCorrect++;
        }

        // Track category performance
        if (!categoryStats[question.category]) {
          categoryStats[question.category] = { correct: 0, total: 0 };
        }
        categoryStats[question.category].total++;
        if (isCorrect) {
          categoryStats[question.category].correct++;
        }

        // Update displays
        scoreDisplay.textContent = score;
        const accuracy = Math.round((answeredCorrect / answered) * 100);
        accuracyDisplay.textContent = accuracy + '%';

        // Visual feedback on buttons
        const buttons = answersContainer.querySelectorAll('.answer-btn');
        buttons.forEach((btn, index) => {
          btn.disabled = true;
          if (index === question.correct) {
            btn.classList.add('correct');
          } else if (index === selectedIndex && !isCorrect) {
            btn.classList.add('incorrect');
          }
        });

        // Show feedback
        showFeedback(isCorrect, question.explanation);
        nextBtn.classList.remove('hidden');
      }

      // Display feedback
      function showFeedback(isCorrect, explanation) {
        const feedbackClass = isCorrect ? 'correct' : 'incorrect';
        const feedbackTitle = isCorrect ? 'âœ“ Correct!' : 'âœ— Incorrect';
        const encouragement = isCorrect 
          ? 'Excellent! Your understanding is solid.' 
          : 'Not quite, but this is a great learning opportunity.';

        feedbackContainer.className = `feedback ${feedbackClass}`;
        feedbackContainer.innerHTML = `
          <div class="feedback-title">${feedbackTitle}</div>
          <div class="feedback-text">
            <p><strong>${encouragement}</strong></p>
            <p>${explanation}</p>
          </div>
        `;
        feedbackContainer.classList.remove('hidden');
      }

      // Move to next question
      function nextQuestion() {
        currentQuestion++;
        loadQuestion();
      }

      // Show final results
      function showResults() {
        quizScreen.classList.add('hidden');
        resultsScreen.classList.remove('hidden');

        const accuracy = Math.round((answeredCorrect / answered) * 100);

        document.getElementById('finalScore').textContent = score;
        document.getElementById('finalAccuracy').textContent = accuracy + '%';
        document.getElementById('totalQuestions').textContent = questions.length;

        // Performance message
        let message = '';
        if (accuracy >= 90) {
          message = 'ðŸ† Outstanding! You have mastered this material. Your dedication to violin excellence shows in your deep understanding of technique and theory. Keep practicing at this level!';
        } else if (accuracy >= 75) {
          message = 'ðŸŽµ Great job! You have a strong foundation. Review the areas where you missed questions and continue building on your solid knowledge base.';
        } else if (accuracy >= 60) {
          message = 'ðŸ“š Good effort! You're developing your understanding. Focus on reviewing the explanations provided and practicing the concepts you found challenging.';
        } else {
          message = 'ðŸŽ» Keep learning! This quiz highlighted areas for growth. Review each explanation carefully and consider revisiting these topics in your studies. Every master was once a beginner!';
        }
        document.getElementById('performanceMessage').textContent = message;

        // Category breakdown
        const breakdown = document.getElementById('categoryBreakdown');
        breakdown.innerHTML = '<h3>Performance by Category</h3>';

        Object.keys(categoryStats).sort().forEach(category => {
          const stats = categoryStats[category];
          const categoryAccuracy = Math.round((stats.correct / stats.total) * 100);
          const item = document.createElement('div');
          item.className = 'category-item';
          item.innerHTML = `
            <span class="category-name">${category}</span>
            <span class="category-score">${stats.correct}/${stats.total} (${categoryAccuracy}%)</span>
          `;
          breakdown.appendChild(item);
        });
      }

      // Reset quiz
      function resetQuiz() {
        currentQuestion = 0;
        score = 0;
        answered = 0;
        answeredCorrect = 0;
        categoryStats = {};
        hasAnswered = false;

        shuffleArray(questions);

        resultsScreen.classList.add('hidden');
        startScreen.classList.remove('hidden');
      }

      // Utility: Shuffle array (Fisher-Yates algorithm)
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Initialize on load
      init();
    })();
  </script>
</body>
</html>